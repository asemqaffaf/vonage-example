<!DOCTYPE html>
<html>
  <head></head>
  <body>
    <div id="app">
      <h1>{{room}}</h1>
      <div id="publishers"></div>
      <div id="subsctibers"></div>
    </div>
    <script src="https://static.opentok.com/v2/js/opentok.min.js"></script>
    <script>
      let apiKey = '{{apiKey}}';
      let sessionId = '{{sessionId}}';
      let token = '{{token}}';

      let session = OT.initSession(apiKey, sessionId);
      let camera = OT.initPublisher('publishers');

      session.connect(token, function () {
        session .publish(camera);
      });

      session.on('streamCreated', function (event) {
        session.subscribe(event.stream, 'subsctibers', { insertMode: 'append' });
      });

    </script>
  </body>
</html>
